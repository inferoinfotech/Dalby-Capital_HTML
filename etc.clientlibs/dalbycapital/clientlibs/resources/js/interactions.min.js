const body_elm=document.body;const mobileMenuButton=document.querySelector(".mobile-menu-button");if(mobileMenuButton){mobileMenuButton.addEventListener("click",function(){mobileMenuButton.classList.toggle("active")})}const dropdowns=document.querySelectorAll("#site-navbar .nav-item.dropdown");dropdowns.forEach(dropdown=>{const menu=dropdown.querySelector(".dropdown-menu");const button=dropdown;button.addEventListener("mouseover",function(){body_elm.classList.add("nav-dd-open");gsap.killTweensOf(menu);gsap.to(menu,{visibility:"visible",opacity:1,duration:.5,clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",ease:"easeInOutQuint",overwrite:"auto"})});button.addEventListener("mouseout",function(e){const related=e.relatedTarget;if(related&&related.closest(".dropdown-menu")){return}body_elm.classList.remove("nav-dd-open");gsap.killTweensOf(menu);gsap.to(menu,{opacity:0,duration:.25,clipPath:"polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)",ease:"easeInOutQuint",overwrite:"auto",onComplete:()=>{gsap.set(menu,{visibility:"hidden"})}})})});const sliders=document.querySelectorAll(".slider");sliders.forEach(slider=>{const slides=slider.querySelectorAll(".slide");const nextBtn=slider.querySelector(".next");const prevBtn=slider.querySelector(".previous");let currentIndex=0;const initialSlide=slider.querySelector(".slide.active");if(initialSlide){const titleSpan=initialSlide.querySelector(".sub-title span");const figure=initialSlide.querySelector(".key-figure");const desc=initialSlide.querySelector(".figure-description");if(desc){gsap.set(desc,{opacity:0})}if(titleSpan){gsap.set(titleSpan,{opacity:0,y:"100%"})}if(figure){figure.textContent="0%"}}ScrollTrigger.create({trigger:slider,start:"top 80%",once:true,onEnter:()=>{animateSubTitleIn(slides[currentIndex]);countFigureIn(slides[currentIndex]);fadeInDescription(slides[currentIndex])}});nextBtn?.addEventListener("click",()=>changeSlide(1));prevBtn?.addEventListener("click",()=>changeSlide(-1));function changeSlide(direction=1){const currentSlide=slides[currentIndex];const nextIndex=(currentIndex+direction+slides.length)%slides.length;const nextSlide=slides[nextIndex];Promise.all([animateSubTitleOut(currentSlide),fadeOutDescription(currentSlide),new Promise(resolve=>{countFigureOut(currentSlide);setTimeout(resolve,800)})]).then(()=>{currentSlide.classList.remove("active");nextSlide.classList.add("active");animateSubTitleIn(nextSlide);countFigureIn(nextSlide);fadeInDescription(nextSlide);currentIndex=nextIndex})}});function animateSubTitleIn(slide){const titleSpan=slide.querySelector(".sub-title span");if(!titleSpan)return;gsap.fromTo(titleSpan,{opacity:0,y:"100%"},{opacity:1,y:"0%",duration:.6,ease:"power2.out"})}function animateSubTitleOut(slide){return new Promise(resolve=>{const titleSpan=slide.querySelector(".sub-title span");if(!titleSpan){resolve();return}gsap.to(titleSpan,{opacity:0,y:"-100%",duration:.4,ease:"power2.in",onComplete:resolve})})}function countFigureIn(slide){const figure=slide.querySelector(".key-figure");if(!figure)return;const endVal=parseInt(figure.dataset.text,10)||0;gsap.fromTo(figure,{textContent:0},{duration:1,textContent:endVal,snap:{textContent:1},ease:"power2.out",onUpdate:()=>{figure.textContent=Math.round(figure.textContent)+"%"}})}function countFigureOut(slide){const figure=slide.querySelector(".key-figure");if(!figure)return;gsap.to(figure,{duration:.8,textContent:0,snap:{textContent:1},ease:"power2.in",onUpdate:()=>{figure.textContent=Math.round(figure.textContent)+"%"}})}function fadeInDescription(slide){const desc=slide.querySelector(".figure-description");if(!desc)return;gsap.fromTo(desc,{opacity:0},{opacity:1,duration:.8,ease:"power2.out"})}function fadeOutDescription(slide){const desc=slide.querySelector(".figure-description");if(!desc)return;return new Promise(resolve=>{gsap.to(desc,{opacity:0,duration:.8,ease:"power2.in",onComplete:resolve})})}(()=>{const insightSections=document.querySelectorAll(".insights-section");insightSections.forEach(section=>{const list=section.querySelector(".insights-list");if(!list)return;const track=section.querySelector(".insights-track");const insights=Array.from(track.querySelectorAll(".insight"));const nav=section.querySelector(".insight-navigation");const nextBtn=nav?.querySelector(".next");const prevBtn=nav?.querySelector(".previous");let currentIndex=0;const slideToInsight=index=>{if(!insights[index])return;setListHeight(index);let offset=0;for(let i=0;i<index;i++){offset+=insights[i].offsetHeight}gsap.to(track,{y:-offset,duration:.6,ease:"power2.out"})};const setListHeight=index=>{const current=insights[index];const next=insights[index+1];const currentHeight=current?.offsetHeight||0;const nextHeight=next?.offsetHeight||0;const totalHeight=currentHeight+nextHeight;gsap.to(list,{height:totalHeight,duration:.4,ease:"power2.out"})};setListHeight(currentIndex);nextBtn?.addEventListener("click",()=>{if(currentIndex<insights.length-2){currentIndex++}else{currentIndex=0}slideToInsight(currentIndex)});prevBtn?.addEventListener("click",()=>{if(currentIndex>0){currentIndex--}else{currentIndex=insights.length-2}slideToInsight(currentIndex)})})})();(()=>{const faqs=document.querySelectorAll(".frequently-asked-questions .question");faqs.forEach(faq=>{const title=faq.querySelector(".question-title");title.addEventListener("click",()=>{if(faq.classList.contains("open")){faq.classList.remove("open");return}document.querySelectorAll(".frequently-asked-questions .question.open").forEach(openItem=>{openItem.classList.remove("open")});faq.classList.add("open")})})})();